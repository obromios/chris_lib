<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ForChrisLib
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ForChrisLib";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo;
    
    
    <span class="title">ForChrisLib</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ForChrisLib
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="ChrisLib.html" title="ChrisLib (module)">ChrisLib</a></span>, Math</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/chris_lib/for_chris_lib.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Aggregated analytical helpers formerly housed in golf_lab.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="ForChrisLib/ChiSquaredStdErr.html" title="ForChrisLib::ChiSquaredStdErr (class)">ChiSquaredStdErr</a></span>, <span class='object_link'><a href="ForChrisLib/Framed.html" title="ForChrisLib::Framed (class)">Framed</a></span>, <span class='object_link'><a href="ForChrisLib/PChiSquared.html" title="ForChrisLib::PChiSquared (class)">PChiSquared</a></span>
    
  
</p>



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="ChrisLib.html" title="ChrisLib (module)">ChrisLib</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ChrisLib.html#VERSION-constant" title="ChrisLib::VERSION (constant)">ChrisLib::VERSION</a></span></p>





  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acf-instance_method" title="#acf (instance method)">#<strong>acf</strong>(x_a, lag)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Autocorrelation at a specific lag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#arbitrary_cdf_a-instance_method" title="#arbitrary_cdf_a (instance method)">#<strong>arbitrary_cdf_a</strong>(func, options, n_samples: 100)  &#x21d2; Array&lt;Array&lt;Float, Float&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sample a cumulative distribution function for plotting.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bias_estimate_by_min-instance_method" title="#bias_estimate_by_min (instance method)">#<strong>bias_estimate_by_min</strong>(store, win_loss_calculator: nil, minimizer_class: nil)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Estimate bias in a histogram by minimising win/loss difference between players.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cdf_calc-instance_method" title="#cdf_calc (instance method)">#<strong>cdf_calc</strong>(x, func, options, mu: 0, sigma: 1, n_pts: 100)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Numerical integration helper for CDFs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cdf_from_bins-instance_method" title="#cdf_from_bins (instance method)">#<strong>cdf_from_bins</strong>(bins, min = 0, delta = 1)  &#x21d2; Hash{Numeric=&gt;Float} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Cumulative distribution function derived from histogram bins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#computer_name_short-instance_method" title="#computer_name_short (instance method)">#<strong>computer_name_short</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hostname truncated to ten characters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delimit-instance_method" title="#delimit (instance method)">#<strong>delimit</strong>(number, delimiter = &#39;,&#39;, separator = &#39;.&#39;)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Format a number with thousands delimiters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fvu-instance_method" title="#fvu (instance method)">#<strong>fvu</strong>(y_hat_a:, y_a:)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Fraction of variance unexplained given predictions and observations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inc_m2_var-instance_method" title="#inc_m2_var (instance method)">#<strong>inc_m2_var</strong>(x, accumulator)  &#x21d2; Array&lt;Numeric&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Incremental mean and second central moment accumulator.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interpolate-instance_method" title="#interpolate (instance method)">#<strong>interpolate</strong>(x, x_L, x_U, y_L, y_U)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Linear interpolation between two points.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inverse_transform_rand-instance_method" title="#inverse_transform_rand (instance method)">#<strong>inverse_transform_rand</strong>(cdf_a)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Inverse transform sampling based on a discretised CDF array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normal_cdf-instance_method" title="#normal_cdf (instance method)">#<strong>normal_cdf</strong>(x)  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Standard normal cumulative distribution function.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normal_pdf-instance_method" title="#normal_pdf (instance method)">#<strong>normal_pdf</strong>(x, options = {})  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Standard normal (or shifted) probability density function.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outcome-instance_method" title="#outcome (instance method)">#<strong>outcome</strong>(results)  &#x21d2; Array&lt;Float&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Compute probabilities of winning given an array of scores.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parabola-instance_method" title="#parabola (instance method)">#<strong>parabola</strong>(x, options = {})  &#x21d2; Numeric </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Evaluate quadratic polynomial with configurable coefficients.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pdf_from_bins-instance_method" title="#pdf_from_bins (instance method)">#<strong>pdf_from_bins</strong>(bins, min = 0, delta = 1)  &#x21d2; Hash{Numeric=&gt;Float} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Probability mass function derived from histogram bins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pdf_from_hist-instance_method" title="#pdf_from_hist (instance method)">#<strong>pdf_from_hist</strong>(bins, min: 0)  &#x21d2; Hash{Integer=&gt;Float} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert integer bin counts into a probability mass function.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#simpson-instance_method" title="#simpson (instance method)">#<strong>simpson</strong>(func, a, b, n, options = {})  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Simpsonâ€™s rule numerical integration for functions referenced by symbol.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skew_normal_cdf_a-instance_method" title="#skew_normal_cdf_a (instance method)">#<strong>skew_normal_cdf_a</strong>(options, n_samples: 100)  &#x21d2; Array&lt;Array&lt;Float, Float&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Discretised skew-normal cumulative distribution function.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skew_normal_pdf-instance_method" title="#skew_normal_pdf (instance method)">#<strong>skew_normal_pdf</strong>(x, options = { alpha: 0 })  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Skew-normal probability density function using alpha parameterisation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skew_normal_rand-instance_method" title="#skew_normal_rand (instance method)">#<strong>skew_normal_rand</strong>(_x, options = { alpha: 0 })  &#x21d2; Float </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Placeholder skew-normal sampler backed by numerical integration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skew_normal_rand_a-instance_method" title="#skew_normal_rand_a (instance method)">#<strong>skew_normal_rand_a</strong>(n, alpha)  &#x21d2; Array&lt;Float&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generate random samples from the skew-normal distribution using inverse transform.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#summed_bins_histogram-instance_method" title="#summed_bins_histogram (instance method)">#<strong>summed_bins_histogram</strong>(x_y, n_bins)  &#x21d2; Array&lt;Array&lt;Float, Numeric, Integer&gt;&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sum y values into equi-width x bins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#test-instance_method" title="#test (instance method)">#<strong>test</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sentinel used in legacy tests.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#weighted_m_3-instance_method" title="#weighted_m_3 (instance method)">#<strong>weighted_m_3</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; Float<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Weighted third central moment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#weighted_m_4-instance_method" title="#weighted_m_4 (instance method)">#<strong>weighted_m_4</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; Float<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Weighted fourth central moment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#weighted_mean-instance_method" title="#weighted_mean (instance method)">#<strong>weighted_mean</strong>(bins, min = 0, delta = 1)  &#x21d2; Float<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Weighted mean based on histogram bins.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#weighted_sd-instance_method" title="#weighted_sd (instance method)">#<strong>weighted_sd</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; Float<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Weighted sample standard deviation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#weighted_skewness-instance_method" title="#weighted_skewness (instance method)">#<strong>weighted_skewness</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; Float<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Weighted skewness using the third central moment.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="acf-instance_method">
  
    #<strong>acf</strong>(x_a, lag)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Autocorrelation at a specific lag.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x_a</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>lag</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256
257
258
259
260
261
262</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acf'>acf</span><span class='lparen'>(</span><span class='id identifier rubyid_x_a'>x_a</span><span class='comma'>,</span> <span class='id identifier rubyid_lag'>lag</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lag is too large, n = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_n'>n</span><span class='embexpr_end'>}</span><span class='tstring_content'>, lag = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lag'>lag</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_lag'>lag</span> <span class='op'>+</span> <span class='int'>1</span>

  <span class='id identifier rubyid_mu'>mu</span> <span class='op'>=</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_mean'>mean</span>
  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_x_a'>x_a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='lparen'>(</span><span class='id identifier rubyid_lag'>lag</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_total'>total</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='id identifier rubyid_x_a'>x_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='id identifier rubyid_lag'>lag</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_total'>total</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span> <span class='op'>-</span> <span class='id identifier rubyid_lag'>lag</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_var'>var</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="arbitrary_cdf_a-instance_method">
  
    #<strong>arbitrary_cdf_a</strong>(func, options, n_samples: 100)  &#x21d2; <tt>Array&lt;Array&lt;Float, Float&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sample a cumulative distribution function for plotting.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>func</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>n_samples</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>100</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Float, Float&gt;&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


448
449
450
451
452
453
454
455</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 448</span>

<span class='kw'>def</span> <span class='id identifier rubyid_arbitrary_cdf_a'>arbitrary_cdf_a</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='label'>n_samples:</span> <span class='int'>100</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='float'>8.0</span>
  <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_width'>width</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_n_samples'>n_samples</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x_a'>x_a</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_n_samples'>n_samples</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='op'>-</span><span class='id identifier rubyid_width'>width</span> <span class='op'>/</span> <span class='int'>2</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_h'>h</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_cdf_calc'>cdf_calc</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bias_estimate_by_min-instance_method">
  
    #<strong>bias_estimate_by_min</strong>(store, win_loss_calculator: nil, minimizer_class: nil)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Estimate bias in a histogram by minimising win/loss difference between players.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>store</span>
      
      
        <span class='type'>(<tt>#histogram</tt>, <tt>#min</tt>, <tt>#max</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>win_loss_calculator</span>
      
      
        <span class='type'>(<tt>#win_loss_graph</tt>, <tt>#win_loss_stats</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>minimizer_class</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bias_estimate_by_min'>bias_estimate_by_min</span><span class='lparen'>(</span><span class='id identifier rubyid_store'>store</span><span class='comma'>,</span> <span class='label'>win_loss_calculator:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>minimizer_class:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_win_loss'>win_loss</span> <span class='op'>=</span> <span class='id identifier rubyid_win_loss_calculator'>win_loss_calculator</span> <span class='op'>||</span> <span class='id identifier rubyid_default_win_loss_calculator'>default_win_loss_calculator</span>

  <span class='id identifier rubyid_fn'>fn</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
    <span class='id identifier rubyid_bins'>bins</span> <span class='op'>=</span> <span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_histogram'>histogram</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_bin_shift'>bin_shift</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pdf'>pdf</span> <span class='op'>=</span> <span class='id identifier rubyid_pdf_from_hist'>pdf_from_hist</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='label'>min:</span> <span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_wl_graph'>wl_graph</span> <span class='op'>=</span> <span class='id identifier rubyid_win_loss'>win_loss</span><span class='period'>.</span><span class='id identifier rubyid_win_loss_graph'>win_loss_graph</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>pdf:</span> <span class='id identifier rubyid_pdf'>pdf</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_outcome'>outcome</span> <span class='op'>=</span> <span class='id identifier rubyid_win_loss'>win_loss</span><span class='period'>.</span><span class='id identifier rubyid_win_loss_stats'>win_loss_stats</span><span class='lparen'>(</span><span class='id identifier rubyid_wl_graph'>wl_graph</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_outcome'>outcome</span> <span class='op'>-</span> <span class='float'>50.0</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>2</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_minimizer'>minimizer</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_minimizer_class'>minimizer_class</span> <span class='op'>||</span> <span class='id identifier rubyid_default_minimizer_class'>default_minimizer_class</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_store'>store</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='comma'>,</span> <span class='id identifier rubyid_fn'>fn</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_minimizer'>minimizer</span><span class='period'>.</span><span class='id identifier rubyid_expected'>expected</span> <span class='op'>=</span> <span class='float'>0.0</span> <span class='kw'>if</span> <span class='id identifier rubyid_minimizer'>minimizer</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:expected=</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_minimizer'>minimizer</span><span class='period'>.</span><span class='id identifier rubyid_iterate'>iterate</span>
  <span class='op'>-</span><span class='id identifier rubyid_minimizer'>minimizer</span><span class='period'>.</span><span class='id identifier rubyid_x_minimum'>x_minimum</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cdf_calc-instance_method">
  
    #<strong>cdf_calc</strong>(x, func, options, mu: 0, sigma: 1, n_pts: 100)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Numerical integration helper for CDFs.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>func</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>mu</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>sigma</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>1</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>n_pts</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>100</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


476
477
478
479
480
481</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 476</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cdf_calc'>cdf_calc</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='label'>mu:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>sigma:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>n_pts:</span> <span class='int'>100</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n_pts must be even (received n_pts=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_n_pts'>n_pts</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_n_pts'>n_pts</span><span class='period'>.</span><span class='id identifier rubyid_even?'>even?</span>

  <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='int'>3</span> <span class='op'>*</span> <span class='id identifier rubyid_sigma'>sigma</span> <span class='op'>?</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='int'>2</span> <span class='op'>*</span> <span class='id identifier rubyid_sigma'>sigma</span> <span class='op'>+</span> <span class='id identifier rubyid_mu'>mu</span> <span class='op'>:</span> <span class='op'>-</span><span class='int'>5</span> <span class='op'>*</span> <span class='id identifier rubyid_sigma'>sigma</span> <span class='op'>+</span> <span class='id identifier rubyid_mu'>mu</span>
  <span class='id identifier rubyid_simpson'>simpson</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_n_pts'>n_pts</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cdf_from_bins-instance_method">
  
    #<strong>cdf_from_bins</strong>(bins, min = 0, delta = 1)  &#x21d2; <tt>Hash{Numeric=&gt;Float}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Cumulative distribution function derived from histogram bins.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Numeric=&gt;Float}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cdf_from_bins'>cdf_from_bins</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pdf_from_bins'>pdf_from_bins</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_cdf_from_pdf'>cdf_from_pdf</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="computer_name_short-instance_method">
  
    #<strong>computer_name_short</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns hostname truncated to ten characters.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>hostname truncated to ten characters</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


495
496
497</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 495</span>

<span class='kw'>def</span> <span class='id identifier rubyid_computer_name_short'>computer_name_short</span>
  <span class='backtick'>`</span><span class='tstring_content'>hostname</span><span class='tstring_end'>`</span></span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>9</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delimit-instance_method">
  
    #<strong>delimit</strong>(number, delimiter = &#39;,&#39;, separator = &#39;.&#39;)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Format a number with thousands delimiters.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>number</span>
      
      
        <span class='type'>(<tt>Numeric</tt>, <tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>delimiter</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;,&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>separator</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;.&#39;</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490
491
492</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delimit'>delimit</span><span class='lparen'>(</span><span class='id identifier rubyid_number'>number</span><span class='comma'>,</span> <span class='id identifier rubyid_delimiter'>delimiter</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_separator'>separator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_parts'>parts</span> <span class='op'>=</span> <span class='id identifier rubyid_number'>number</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\d)(?=(\d\d\d)+(?!\d))</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_delimiter'>delimiter</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_parts'>parts</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='id identifier rubyid_separator'>separator</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fvu-instance_method">
  
    #<strong>fvu</strong>(y_hat_a:, y_a:)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Fraction of variance unexplained given predictions and observations.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>y_hat_a</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>y_a</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fvu'>fvu</span><span class='lparen'>(</span><span class='label'>y_hat_a:</span><span class='comma'>,</span> <span class='label'>y_a:</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TGM - y_hat_a must be greater than 1</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_y_hat_a'>y_hat_a</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='int'>2</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TGM - y_hat_a.size != y_a.size</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_y_hat_a'>y_hat_a</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='id identifier rubyid_y_a'>y_a</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

  <span class='id identifier rubyid_ss_err'>ss_err</span> <span class='op'>=</span> <span class='id identifier rubyid_y_hat_a'>y_hat_a</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='id identifier rubyid_y_a'>y_a</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_yh'>yh</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_yh'>yh</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>2</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
  <span class='id identifier rubyid_y_mu'>y_mu</span> <span class='op'>=</span> <span class='id identifier rubyid_y_a'>y_a</span><span class='period'>.</span><span class='id identifier rubyid_mean'>mean</span>
  <span class='id identifier rubyid_ss_tot'>ss_tot</span> <span class='op'>=</span> <span class='id identifier rubyid_y_a'>y_a</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_y'>y</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_y_mu'>y_mu</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>2</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
  <span class='id identifier rubyid_ss_err'>ss_err</span> <span class='op'>/</span> <span class='id identifier rubyid_ss_tot'>ss_tot</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inc_m2_var-instance_method">
  
    #<strong>inc_m2_var</strong>(x, accumulator)  &#x21d2; <tt>Array&lt;Numeric&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Incremental mean and second central moment accumulator.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>accumulator</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><dl class="rdoc-list label-list"><dt>mean, m2, n</dt>
<dd></dd></dl>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inc_m2_var'>inc_m2_var</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_accumulator'>accumulator</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mean'>mean</span><span class='comma'>,</span> <span class='id identifier rubyid_m2'>m2</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_accumulator'>accumulator</span>
  <span class='id identifier rubyid_n'>n</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_mean'>mean</span>
  <span class='id identifier rubyid_mean'>mean</span> <span class='op'>+=</span> <span class='id identifier rubyid_delta'>delta</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_n'>n</span>
  <span class='id identifier rubyid_delta2'>delta2</span> <span class='op'>=</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_mean'>mean</span>
  <span class='id identifier rubyid_m2'>m2</span> <span class='op'>+=</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>*</span> <span class='id identifier rubyid_delta2'>delta2</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_mean'>mean</span><span class='comma'>,</span> <span class='id identifier rubyid_m2'>m2</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interpolate-instance_method">
  
    #<strong>interpolate</strong>(x, x_L, x_U, y_L, y_U)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Linear interpolation between two points.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


438
439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 438</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interpolate'>interpolate</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_x_L'>x_L</span><span class='comma'>,</span> <span class='id identifier rubyid_x_U'>x_U</span><span class='comma'>,</span> <span class='id identifier rubyid_y_L'>y_L</span><span class='comma'>,</span> <span class='id identifier rubyid_y_U'>y_U</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_y_U'>y_U</span> <span class='op'>-</span> <span class='id identifier rubyid_y_L'>y_L</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_x_U'>x_U</span> <span class='op'>-</span> <span class='id identifier rubyid_x_L'>x_L</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_x_L'>x_L</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_m'>m</span> <span class='op'>+</span> <span class='id identifier rubyid_y_L'>y_L</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inverse_transform_rand-instance_method">
  
    #<strong>inverse_transform_rand</strong>(cdf_a)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Inverse transform sampling based on a discretised CDF array.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cdf_a</span>
      
      
        <span class='type'>(<tt>Array&lt;Array(Float, Float)&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426
427
428
429
430
431
432
433
434</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 423</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inverse_transform_rand'>inverse_transform_rand</span><span class='lparen'>(</span><span class='id identifier rubyid_cdf_a'>cdf_a</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_p_a'>p_a</span> <span class='op'>=</span> <span class='id identifier rubyid_cdf_a'>cdf_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pair'>pair</span><span class='op'>|</span> <span class='id identifier rubyid_pair'>pair</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_x_a'>x_a</span> <span class='op'>=</span> <span class='id identifier rubyid_cdf_a'>cdf_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pair'>pair</span><span class='op'>|</span> <span class='id identifier rubyid_pair'>pair</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_p_min'>p_min</span> <span class='op'>=</span> <span class='id identifier rubyid_p_a'>p_a</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_p_max'>p_max</span> <span class='op'>=</span> <span class='id identifier rubyid_p_a'>p_a</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
  <span class='id identifier rubyid_p_rand'>p_rand</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_p_min'>p_min</span> <span class='kw'>if</span> <span class='id identifier rubyid_p_rand'>p_rand</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_p_min'>p_min</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_p_max'>p_max</span> <span class='kw'>if</span> <span class='id identifier rubyid_p_rand'>p_rand</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_p_max'>p_max</span>

  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='id identifier rubyid_p_a'>p_a</span><span class='period'>.</span><span class='id identifier rubyid_find_index'>find_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_p_rand'>p_rand</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_interpolate'>interpolate</span><span class='lparen'>(</span><span class='id identifier rubyid_p_rand'>p_rand</span><span class='comma'>,</span> <span class='id identifier rubyid_p_a'>p_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_p_a'>p_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normal_cdf-instance_method">
  
    #<strong>normal_cdf</strong>(x)  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Standard normal cumulative distribution function.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normal_cdf'>normal_cdf</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
  <span class='float'>0.5</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='int'>1</span> <span class='op'>+</span> <span class='id identifier rubyid_erf'>erf</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span> <span class='op'>/</span> <span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normal_pdf-instance_method">
  
    #<strong>normal_pdf</strong>(x, options = {})  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Standard normal (or shifted) probability density function.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>:mu and :sigma keys</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normal_pdf'>normal_pdf</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>mu:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>sigma:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mu'>mu</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:mu</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_sigma'>sigma</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:sigma</span><span class='rbracket'>]</span>
  <span class='const'>E</span><span class='op'>**</span><span class='lparen'>(</span><span class='op'>-</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>2</span> <span class='op'>/</span> <span class='int'>2</span> <span class='op'>/</span> <span class='id identifier rubyid_sigma'>sigma</span><span class='op'>**</span><span class='int'>2</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='int'>2</span> <span class='op'>*</span> <span class='const'>PI</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_sigma'>sigma</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outcome-instance_method">
  
    #<strong>outcome</strong>(results)  &#x21d2; <tt>Array&lt;Float&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Compute probabilities of winning given an array of scores.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>results</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Float&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>probability mass for each input</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outcome'>outcome</span><span class='lparen'>(</span><span class='id identifier rubyid_results'>results</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_s_min'>s_min</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
  <span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='id identifier rubyid_s_min'>s_min</span> <span class='op'>?</span> <span class='int'>1</span> <span class='op'>:</span> <span class='int'>0</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='period'>.</span><span class='id identifier rubyid_nonzero?'>nonzero?</span> <span class='op'>||</span> <span class='int'>1</span>
  <span class='id identifier rubyid_flags'>flags</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_total'>total</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parabola-instance_method">
  
    #<strong>parabola</strong>(x, options = {})  &#x21d2; <tt>Numeric</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Evaluate quadratic polynomial with configurable coefficients.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


386
387
388
389
390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 386</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parabola'>parabola</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>a:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>b:</span> <span class='int'>3</span><span class='comma'>,</span> <span class='label'>c:</span> <span class='int'>4</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:a</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:b</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:c</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_a'>a</span> <span class='op'>*</span> <span class='id identifier rubyid_x'>x</span><span class='op'>**</span><span class='int'>2</span> <span class='op'>+</span> <span class='id identifier rubyid_b'>b</span> <span class='op'>*</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='id identifier rubyid_c'>c</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pdf_from_bins-instance_method">
  
    #<strong>pdf_from_bins</strong>(bins, min = 0, delta = 1)  &#x21d2; <tt>Hash{Numeric=&gt;Float}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Probability mass function derived from histogram bins.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Numeric=&gt;Float}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 337</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pdf_from_bins'>pdf_from_bins</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='period'>.</span><span class='id identifier rubyid_nonzero?'>nonzero?</span> <span class='op'>||</span> <span class='int'>1</span>
  <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_bin'>bin</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_min'>min</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span><span class='comma'>,</span> <span class='id identifier rubyid_bin'>bin</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_total'>total</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pdf_from_hist-instance_method">
  
    #<strong>pdf_from_hist</strong>(bins, min: 0)  &#x21d2; <tt>Hash{Integer=&gt;Float}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert integer bin counts into a probability mass function.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>bins</span>
      
      
        <span class='type'>(<tt>Array&lt;Integer&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>min</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Integer=&gt;Float}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pdf_from_hist'>pdf_from_hist</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='label'>min:</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='period'>.</span><span class='id identifier rubyid_nonzero?'>nonzero?</span> <span class='op'>||</span> <span class='int'>1</span>
  <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_with_index'>with_index</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_total'>total</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="simpson-instance_method">
  
    #<strong>simpson</strong>(func, a, b, n, options = {})  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Simpsonâ€™s rule numerical integration for functions referenced by symbol.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>func</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>a</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>b</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>n</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>even number of intervals</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


401
402
403
404
405
406
407
408
409</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 401</span>

<span class='kw'>def</span> <span class='id identifier rubyid_simpson'>simpson</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n must be even (received n=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_n'>n</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_n'>n</span><span class='period'>.</span><span class='id identifier rubyid_even?'>even?</span>

  <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span> <span class='op'>-</span> <span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_n'>n</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>+=</span> <span class='int'>4</span> <span class='op'>*</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='lparen'>(</span><span class='int'>2</span><span class='op'>..</span><span class='id identifier rubyid_n'>n</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_step'>step</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>+=</span> <span class='int'>2</span> <span class='op'>*</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_func'>func</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_s'>s</span> <span class='op'>*</span> <span class='id identifier rubyid_h'>h</span> <span class='op'>/</span> <span class='int'>3</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skew_normal_cdf_a-instance_method">
  
    #<strong>skew_normal_cdf_a</strong>(options, n_samples: 100)  &#x21d2; <tt>Array&lt;Array&lt;Float, Float&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Discretised skew-normal cumulative distribution function.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Float, Float&gt;&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461
462
463
464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 459</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skew_normal_cdf_a'>skew_normal_cdf_a</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='label'>n_samples:</span> <span class='int'>100</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='float'>8.0</span>
  <span class='id identifier rubyid_h'>h</span> <span class='op'>=</span> <span class='id identifier rubyid_width'>width</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_n_samples'>n_samples</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x_a'>x_a</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_n_samples'>n_samples</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='op'>-</span><span class='id identifier rubyid_width'>width</span> <span class='op'>/</span> <span class='int'>2</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_h'>h</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_cdf_calc'>cdf_calc</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='symbol'>:skew_normal_pdf</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skew_normal_pdf-instance_method">
  
    #<strong>skew_normal_pdf</strong>(x, options = { alpha: 0 })  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Skew-normal probability density function using alpha parameterisation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{ alpha: 0 }</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


370
371
372
373
374</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 370</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skew_normal_pdf'>skew_normal_pdf</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>alpha:</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>alpha:</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_alpha'>alpha</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:alpha</span><span class='rbracket'>]</span>
  <span class='int'>2</span> <span class='op'>*</span> <span class='id identifier rubyid_normal_pdf'>normal_pdf</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_normal_cdf'>normal_cdf</span><span class='lparen'>(</span><span class='id identifier rubyid_alpha'>alpha</span> <span class='op'>*</span> <span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skew_normal_rand-instance_method">
  
    #<strong>skew_normal_rand</strong>(_x, options = { alpha: 0 })  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Placeholder skew-normal sampler backed by numerical integration.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 378</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skew_normal_rand'>skew_normal_rand</span><span class='lparen'>(</span><span class='id identifier rubyid__x'>_x</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>alpha:</span> <span class='int'>0</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cdf_calc'>cdf_calc</span><span class='lparen'>(</span><span class='id identifier rubyid_rand'>rand</span><span class='comma'>,</span> <span class='symbol'>:normal_pdf</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>mu:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>sigma:</span> <span class='int'>4</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='label'>n_pts:</span> <span class='int'>100</span><span class='comma'>,</span> <span class='label'>sigma:</span> <span class='int'>4</span><span class='comma'>,</span> <span class='label'>mu:</span> <span class='int'>2</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="skew_normal_rand_a-instance_method">
  
    #<strong>skew_normal_rand_a</strong>(n, alpha)  &#x21d2; <tt>Array&lt;Float&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generate random samples from the skew-normal distribution using inverse transform.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>n</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>alpha</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Float&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


415
416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 415</span>

<span class='kw'>def</span> <span class='id identifier rubyid_skew_normal_rand_a'>skew_normal_rand_a</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='comma'>,</span> <span class='id identifier rubyid_alpha'>alpha</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cdf_a'>cdf_a</span> <span class='op'>=</span> <span class='id identifier rubyid_arbitrary_cdf_a'>arbitrary_cdf_a</span><span class='lparen'>(</span><span class='symbol'>:skew_normal_pdf</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>alpha:</span> <span class='id identifier rubyid_alpha'>alpha</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_inverse_transform_rand'>inverse_transform_rand</span><span class='lparen'>(</span><span class='id identifier rubyid_cdf_a'>cdf_a</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="summed_bins_histogram-instance_method">
  
    #<strong>summed_bins_histogram</strong>(x_y, n_bins)  &#x21d2; <tt>Array&lt;Array&lt;Float, Numeric, Integer&gt;&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sum y values into equi-width x bins.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x_y</span>
      
      
        <span class='type'>(<tt>Array&lt;Array(Float, Float)&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>n_bins</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;Float, Numeric, Integer&gt;&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_summed_bins_histogram'>summed_bins_histogram</span><span class='lparen'>(</span><span class='id identifier rubyid_x_y'>x_y</span><span class='comma'>,</span> <span class='id identifier rubyid_n_bins'>n_bins</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_x_a'>x_a</span> <span class='op'>=</span> <span class='id identifier rubyid_x_y'>x_y</span><span class='period'>.</span><span class='id identifier rubyid_transpose'>transpose</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_y_a'>y_a</span> <span class='op'>=</span> <span class='id identifier rubyid_x_y'>x_y</span><span class='period'>.</span><span class='id identifier rubyid_transpose'>transpose</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
  <span class='id identifier rubyid_max'>max</span> <span class='op'>=</span> <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
  <span class='id identifier rubyid_bin_sums'>bin_sums</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_n_bins'>n_bins</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bins'>bins</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_n_bins'>n_bins</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_max'>max</span> <span class='op'>-</span> <span class='id identifier rubyid_min'>min</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_n_bins'>n_bins</span>

  <span class='id identifier rubyid_x_a'>x_a</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_j'>j</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_min'>min</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_delta'>delta</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_n_bins'>n_bins</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
    <span class='id identifier rubyid_bin_sums'>bin_sums</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_y_a'>y_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_bins'>bins</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_bin_sums'>bin_sums</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bin_sum'>bin_sum</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_min'>min</span> <span class='op'>+</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>/</span> <span class='int'>2</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span><span class='comma'>,</span> <span class='id identifier rubyid_bin_sum'>bin_sum</span><span class='comma'>,</span> <span class='id identifier rubyid_bins'>bins</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="test-instance_method">
  
    #<strong>test</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns sentinel used in legacy tests.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>sentinel used in legacy tests</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test'>test</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>here</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="weighted_m_3-instance_method">
  
    #<strong>weighted_m_3</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; <tt>Float</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Weighted third central moment.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 311</span>

<span class='kw'>def</span> <span class='id identifier rubyid_weighted_m_3'>weighted_m_3</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_mu'>mu</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>1</span>

  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>3</span> <span class='op'>*</span> <span class='id identifier rubyid_w'>w</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>/</span> <span class='id identifier rubyid_n'>n</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="weighted_m_4-instance_method">
  
    #<strong>weighted_m_4</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; <tt>Float</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Weighted fourth central moment.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


324
325
326
327
328
329
330
331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 324</span>

<span class='kw'>def</span> <span class='id identifier rubyid_weighted_m_4'>weighted_m_4</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_mu'>mu</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>1</span>

  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>4</span> <span class='op'>*</span> <span class='id identifier rubyid_w'>w</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>/</span> <span class='id identifier rubyid_n'>n</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="weighted_mean-instance_method">
  
    #<strong>weighted_mean</strong>(bins, min = 0, delta = 1)  &#x21d2; <tt>Float</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Weighted mean based on histogram bins.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>bins</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>min</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>delta</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>1</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_weighted_mean'>weighted_mean</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>

  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_min'>min</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_w'>w</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_sum'>sum</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>/</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="weighted_sd-instance_method">
  
    #<strong>weighted_sd</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; <tt>Float</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Weighted sample standard deviation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>bins</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>mu</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>min</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>delta</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>1</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286
287
288
289
290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_weighted_sd'>weighted_sd</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_mu'>mu</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='op'>&lt;</span> <span class='int'>2</span>

  <span class='id identifier rubyid_sum'>sum</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_w'>w</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>+</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>*</span> <span class='id identifier rubyid_delta'>delta</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>-</span> <span class='id identifier rubyid_mu'>mu</span><span class='rparen'>)</span><span class='op'>**</span><span class='int'>2</span> <span class='op'>*</span> <span class='id identifier rubyid_w'>w</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='id identifier rubyid_sum'>sum</span> <span class='op'>/</span> <span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="weighted_skewness-instance_method">
  
    #<strong>weighted_skewness</strong>(bins, mu, min = 0, delta = 1)  &#x21d2; <tt>Float</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Weighted skewness using the third central moment.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>bins</span>
      
      
        <span class='type'>(<tt>Array&lt;Numeric&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>mu</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>min</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>delta</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>1</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304
305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/chris_lib/for_chris_lib.rb', line 300</span>

<span class='kw'>def</span> <span class='id identifier rubyid_weighted_skewness'>weighted_skewness</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_mu'>mu</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='id identifier rubyid_bins'>bins</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_n'>n</span> <span class='op'>&lt;</span> <span class='int'>2</span>

  <span class='id identifier rubyid_third_moment'>third_moment</span> <span class='op'>=</span> <span class='id identifier rubyid_weighted_m_3'>weighted_m_3</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_mu'>mu</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sd'>sd</span> <span class='op'>=</span> <span class='id identifier rubyid_weighted_sd'>weighted_sd</span><span class='lparen'>(</span><span class='id identifier rubyid_bins'>bins</span><span class='comma'>,</span> <span class='id identifier rubyid_mu'>mu</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_third_moment'>third_moment</span> <span class='op'>/</span> <span class='id identifier rubyid_sd'>sd</span><span class='op'>**</span><span class='int'>3</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Sep 26 12:01:38 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.2).
</div>

    </div>
  </body>
</html>